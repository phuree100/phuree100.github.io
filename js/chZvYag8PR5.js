;/*FB_PKG_DELIM*/

__d("JSResource",["JSResourceReferenceImpl"],(function(a,b,c,d,e,f,g){var h={};function i(a,b){h[a]=b}function j(a){return h[a]}function a(a){a=a;var b=j(a);if(b)return b;b=new(c("JSResourceReferenceImpl"))(a);i(a,b);return b}a.loadAll=c("JSResourceReferenceImpl").loadAll;g["default"]=a}),98);
__d("ReactDOM_DEPRECATED",["ReactDOMCompatibilityLayer","cr:1293","err","setupReactRefresh"],(function(a,b,c,d,e,f,g){b("setupReactRefresh");function a(){throw c("err")("This React API is not available on Workplace.")}f=(e=b("cr:1293").findDOMNode)!=null?e:a;g.findDOMNode_DEPRECATED=f;g.render_DEPRECATED=d("ReactDOMCompatibilityLayer").render_DEPRECATED;g.unmountComponentAtNode_DEPRECATED=d("ReactDOMCompatibilityLayer").unmountComponentAtNode_DEPRECATED}),98);
__d("MZeroBalanceDetectionModuleV2",["Bootloader","MDOM","MRequest","ReactDOM_DEPRECATED","Stratcom","URI","ZeroBalanceDetectionConfig","goURI"],(function(a,b,c,d,e,f,g){"use strict";var h,i="/zero/balance/",j=0,k=!1,l=[],m=!1,n=!1,o;function p(a){C(i,"POST",a,!0)}function q(){l.forEach(function(a){a.onerror=function(){},a.src=""})}function r(a){k=!0,m=!1,q(),p({out_of_balance:!0,reason:a,location:o.location,detection_method:o.detection_method}),o.onZeroBalance&&o.onZeroBalance(a),n?t():o.free_redirect_uri&&c("goURI")(o.free_redirect_uri,!0)}function s(a){k=!0,m=!1,p({out_of_balance:!1,reason:a,location:o.location,detection_method:o.detection_method}),o.onNotZeroBalance&&o.onNotZeroBalance(a),q(),o.paid_continue_uri?c("goURI")(o.paid_continue_uri,!0):F()}function t(){var a=(h||(h=c("URI"))).getRequestURI().setSubdomain("free");c("Bootloader").loadModules(["react","ReactDOM","ZeroDialog.react"],function(b,c,e){d("ReactDOM_DEPRECATED").render_DEPRECATED(b.jsx(e,{content:o.content,onConfirmURI:a}),d("MDOM").create("div"))},"MZeroBalanceDetectionModuleV2")}var u=!1,v=!1;function w(){u?r("IMAGE_FAILURE_ERROR"):o.detection_method=="smart_timeout"?r("IMAGE_REQUEST_TIMEOUT"):s("PAID_IMAGE_TIMEOUT_ZB")}function x(){if(k)return;u&&(v&&w());++j>=o.request_count&&(v&&w())}function y(a){var b=null;function c(){b&&(clearTimeout(b),b=null)}var d=new Image();d.onerror=function(){c(),s("FREE_IMAGE_ERROR")};d.onload=function(){c(),v=!0,j>=o.request_count&&w()};d.src=a;b=setTimeout(function(){s("FREE_IMAGE_TIMEOUT"),d.onerror=function(){},d.src=""},o.timeout)}function z(a){var b=null;function c(){b&&(clearTimeout(b),b=null)}var d=new Image();d.onerror=function(){c(),u=!0,x()};d.onload=function(){c(),s("IMAGE_LOAD_SUCCESS")};d.src=a;b=setTimeout(function(){x(),d.onerror=function(){},d.src=""},o.timeout);l.push(d)}function A(a){if(k)return;s("carrier_signal_fail")}function B(a){if(k)return;a.zero_balance==="true"&&a.special_pricing!=="true"?r("carrier_signal_zb"):s("carrier_signal_not_zb")}function C(a,b,d,e){a=new(c("MRequest"))(a).setMethod(b).setData(d).setIgnoreErrors(!!e).setCORS(!e).setRaw(!e).setTimeout(o.timeout);e||(a.listen("done",function(a){B(a)}),a.listen("error",function(a){A(o.timeout+" : "+o.request_count)}));a.send()}function D(a){a=new(h||(h=c("URI")))(a.getData()).qualify().getSubdomain();if(a.startsWith("mobile")){n=!0;a=JSON.parse(JSON.stringify(c("ZeroBalanceDetectionConfig")));E(a);c("Stratcom").removeCurrentListener()}}function E(a){if(m)return;o=a;p({event:"detection_ran",location:o.location,detection_method:o.detection_method});j=0;k=!1;m=!0;if(o.use_http){o.free_img_url?(v=!1,y(o.free_img_url)):v=!0;a=o.img_url;a+=a.indexOf("?")==-1?"?":"&";for(var b=0;b<o.request_count;b++)z(a+"seq="+b+"&"+Date.now())}}function F(){c("Stratcom").listen("MRequest:timeout",null,D)}g.startDetection=E;g.monitor=F}),98);